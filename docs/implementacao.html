<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.361">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Oficina: Mapeamento de áreas resilientes a mudanças climáticas nos biomas brasileiros - 6&nbsp; Detalhamento das análises</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./resultados.html" rel="next">
<link href="./metodologia.html" rel="prev">
<link href="./figs/TNC.png" rel="icon" type="image/png">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./implementacao.html"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Detalhamento das análises</span></a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Oficina: Mapeamento de áreas resilientes a mudanças climáticas nos biomas brasileiros</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Resumo executivo</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./summary.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Resumo</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./justificativa.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Justificativa</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./objetivo.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Objetivo</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Introdução</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./metodologia.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Métodos</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./implementacao.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Detalhamento das análises</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./resultados.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Resultados</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./oficina.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Sobre o grupo de trabalho e as oficinas</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#regiões-eco-geológicas" id="toc-regiões-eco-geológicas" class="nav-link active" data-scroll-target="#regiões-eco-geológicas"><span class="header-section-number">6.1</span> Regiões eco-geológicas</a></li>
  <li><a href="#resiliência-da-paisagem" id="toc-resiliência-da-paisagem" class="nav-link" data-scroll-target="#resiliência-da-paisagem"><span class="header-section-number">6.2</span> Resiliência da Paisagem</a>
  <ul class="collapse">
  <li><a href="#diversidade-da-paisagem" id="toc-diversidade-da-paisagem" class="nav-link" data-scroll-target="#diversidade-da-paisagem"><span class="header-section-number">6.2.1</span> Diversidade da paisagem</a></li>
  <li><a href="#conectividade-local" id="toc-conectividade-local" class="nav-link" data-scroll-target="#conectividade-local"><span class="header-section-number">6.2.2</span> Conectividade local</a></li>
  <li><a href="#combinando-diversidade-da-paisagem-e-conectividade-local-resiliência" id="toc-combinando-diversidade-da-paisagem-e-conectividade-local-resiliência" class="nav-link" data-scroll-target="#combinando-diversidade-da-paisagem-e-conectividade-local-resiliência"><span class="header-section-number">6.2.3</span> Combinando diversidade da paisagem e conectividade local: resiliência</a></li>
  </ul></li>
  <li><a href="#conectividade-regional" id="toc-conectividade-regional" class="nav-link" data-scroll-target="#conectividade-regional"><span class="header-section-number">6.3</span> Conectividade regional</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Detalhamento das análises</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<section id="regiões-eco-geológicas" class="level2" data-number="6.1">
<h2 data-number="6.1" class="anchored" data-anchor-id="regiões-eco-geológicas"><span class="header-section-number">6.1</span> Regiões eco-geológicas</h2>
<!-- Alisson: este nome pode mudar -->
<p>As regiões eco-geológicas do Brasil foram delimitadas para encontrar regiões homólogas em relação aos <strong>Domínios Geológicos</strong> e às <strong>Ecoregiões</strong> do país, que pudessem ser usadas para limitar a variação das variáveis ambientais usadas ao calcular a <a href="#resiliência-da-paisagem"><strong>Resiliência da Paisagem</strong></a>, de modo a normalizar os valores de resiliência de acordo com regiões homólogas, ao invés de todo o país.</p>
<p>Os <strong>Domínios Geológicos</strong> são grupos de unidades geológicas, separados pelas similidades nas classificações de tipo de rocha. Os domínios foram criados a partir da classificação feita pela CPRM (Serviços Geológico do Brasil; <strong><span class="citation" data-cites="citação">(<a href="references.html#ref-citação" role="doc-biblioref"><strong>citação?</strong></a>)</span></strong>). A classificação por unidades geológicas consistia em um número muito grande de categorias para o Brasil (aproximadamente 1350), por esse motivo utilizamos um agrupamento dessas categorias por <strong>Domínios Geológicos</strong> (14 domínios).</p>
<p>Já as <strong>Ecoregiões</strong> são agrupamentos de regiões ecológicas similiares, consistem em unidades biogeográficas que compartilhem comunidades naturais de espécies, dinâmicas naturais e condições ambientais <span class="citation" data-cites="citação">(<a href="references.html#ref-citação" role="doc-biblioref"><strong>citação?</strong></a>)</span>. Nós utilizamos a classificação da Terrestrial Ecoregions of the World (TEOW), que é uma regionalização biogeográfica da biodiversidade terrestre realizada pela WWF <span class="citation" data-cites="citação">(<a href="references.html#ref-citação" role="doc-biblioref"><strong>citação?</strong></a>)</span>. Para o Brasil existem 50 ecoregiões.</p>
<p>Tanto os domínios geológicos quanto as ecoregiões são polígonos que representam as diferentes categorias, que foram rasterizados para prosseguir com o cálculo das regiões eco-geológicas através da sequinte equação: <span class="math display">\[Regiões\ eco-geológicas = {(Ecoregiões)+(100\times Domínio \ Geológico)}\]</span> Desta forma, os valores do raster final estão no formato <strong>GGEE</strong>, onde <strong>GG</strong> representam os domínios geológicos e <strong>EE</strong> as categorias de ecoregiões. <!--
|Código|Ecoregião|
|1|Alto Paraná Atlantic forests|
|2|Amazon-Orinoco-Southern Caribbean mangroves|
|3|Araucaria moist forests|
|4|Atlantic Coast restingas|
|5|Atlantic dry forests|
|6|Bahia coastal forests|
|7|Bahia interior forests|
|8|Beni savanna|
|9|Caatinga|
|10|Caatinga Enclaves moist forests|
|11|Campos Rupestres montane savanna|
|12|Caqueta moist forests|
|13|Cerrado|
|14|Chiquitano dry forests|
|15|Dry Chaco|
|16|Espinal|
|17|Fernando de Noronha-Atol das Rocas moist forests|
|18|Guianan Highlands moist forests|
|19|Guianan moist forests|
|20|Guianan piedmont and lowland moist forests|
|21|Guianan savanna|
|22|Gurupa varzeá|
|23|Humid Chaco|
|24|Iquitos varzeá|
|25|Japurá-Solimoes-Negro moist forests|
|26|Juruá-Purus moist forests|
|27|Madeira-Tapajós moist forests|
|28|Marajó varzeá|
|29|Maranhão Babaçu forests|
|30|Mato Grosso seasonal forests|
|31|Monte Alegre varzeá|
|32|Negro-Branco moist forests|
|33|Northeastern Brazil restingas|
|34|Pantanal|
|35|Pantepui|
|36|Pernambuco coastal forests|
|37|Pernambuco interior forests|
|38|Purus varzeá|
|39|Purus-Madeira moist forests|
|40|Rio Negro campinarana|
|41|Serra do Mar coastal forests|
|42|Solimões-Japurá moist forests|
|43|Southern Atlantic mangroves|
|44|Southern Cone Mesopotamian savanna|
|45|Southwest Amazon moist forests|
|46|Tapajós-Xingu moist forests|
|47|Tocantins/Pindare moist forests|
|48|Uatuma-Trombetas moist forests|
|49|Uruguayan savanna|
|50|Xingu-Tocantins-Araguaia moist forests|
--></p>
</section>
<section id="resiliência-da-paisagem" class="level2" data-number="6.2">
<h2 data-number="6.2" class="anchored" data-anchor-id="resiliência-da-paisagem"><span class="header-section-number">6.2</span> Resiliência da Paisagem</h2>
<p>A Resiliência da Paisagem foi calculada como a média entre os valores padronizados (<span class="math inline">\({Z}\)</span>) de <a href="#diversidade-da-paisagem"><strong>Diversidade da Paisagem</strong></a> e <a href="#conectividade-local"><strong>Conectividade Local</strong></a>. Todas as imagens utilizadas para o cálculo de Resiliência estão na escala de 90 metros e foram reprojetadas para o <em>DATUM WGS84</em>.</p>
<section id="diversidade-da-paisagem" class="level3" data-number="6.2.1">
<h3 data-number="6.2.1" class="anchored" data-anchor-id="diversidade-da-paisagem"><span class="header-section-number">6.2.1</span> Diversidade da paisagem</h3>
<p>O cálculo de diversidade da paisagem foi realizado no Google Earth Engine <span class="citation" data-cites="gorelick_google_2017">(<a href="references.html#ref-gorelick_google_2017" role="doc-biblioref">Gorelick et al. 2017</a>)</span> e é composto por médias feitas pixel a pixel entre os maiores valores padronizados ( <em>Z-scores</em> ) das imagens: <a href="#formas-de-relevo"><strong>Variedade de Formas de Relevo</strong></a>, <a href="#amplitude-altitudinal"><strong>Amplitude Altitudinal</strong></a>, <a href="#densidade-de-banhados"><strong>Densidade de Banhados</strong></a> e <a href="#diversidade-de-solo"><strong>Diversidade de Solo</strong></a>. Utilizamos o Google Earth Engine por ser uma plataforma baseada em nuvem que oferece acesso remoto a uma vasta coleção de imagens de satélite e bases de dados geoespaciais de acesso livre e com capacidade computacional para realizar as análises em qualquer equipamento disponivel <span class="citation" data-cites="gorelick_google_2017">(<a href="references.html#ref-gorelick_google_2017" role="doc-biblioref">Gorelick et al. 2017</a>)</span>. Isso possibilita com que nossas análises sejam de livre acesso e que contribuam para uma ciência mais transparente e livre <span class="citation" data-cites="citação">(<a href="references.html#ref-citação" role="doc-biblioref"><strong>citação?</strong></a>)</span>.</p>
<section id="formas-de-relevo" class="level4" data-number="6.2.1.1">
<h4 data-number="6.2.1.1" class="anchored" data-anchor-id="formas-de-relevo"><span class="header-section-number">6.2.1.1</span> Formas de Relevo</h4>
<p>A classificação e distribuição espacial das formas de relevo são a base para o cálculo da <strong>diversidade da paisagem</strong> e representam áreas com maiores estabilidade microclimática que resistirão aos impactos causados pelas mudanças climáticas <span class="citation" data-cites="citação">(<a href="references.html#ref-citação" role="doc-biblioref"><strong>citação?</strong></a>)</span>. Essa classificação é baseada em combinações de informações sobre a <strong>inclinação</strong> (<em>slope</em>), <strong>orientação</strong> (<em>aspect</em>), <strong>indice de posição topográfica</strong> (<em>topographic position index</em>), <strong>indice de umidade</strong> (<em>moisture index</em>) e a distribuição de <strong>rios</strong>, <strong>lagos</strong> e <strong>áreas úmidas</strong> dos ambientes. Essa combinação corresponde a ambientes topográficos locais com combinações distintas de umidade, radiação e deposição de sedimentos <span class="citation" data-cites="citação">(<a href="references.html#ref-citação" role="doc-biblioref"><strong>citação?</strong></a>)</span>.</p>
<p>Nossa metodologia de classificação de formas de relevo foi baseada em estudos prévios executados pela equipe de <strong>Ciências da TNC Global</strong>, publicada inicialmente em 2014 <span class="citation" data-cites="citação">(<a href="references.html#ref-citação" role="doc-biblioref"><strong>citação?</strong></a>)</span> e refinada em 2016 <span class="citation" data-cites="citação">(<a href="references.html#ref-citação" role="doc-biblioref"><strong>citação?</strong></a> dos dois relatórios)</span>.</p>
<p>Para o cálculo de <a href="#inclinação_do_relevo">inclinação</a>, <a href="#aspecto_do_relevo">aspecto</a> e <a href="#índice_de_posição_topográfica">índice de posição topográfica (TPI)</a>, utilizamos a imagem do modelo digital de elevação (DEM) do Merit-DEM <span class="citation" data-cites="citação">(<a href="references.html#ref-citação" role="doc-biblioref"><strong>citação?</strong></a>)</span>, em uma escala de 90 metros. Escolhemos utilizar esse DEM por ser um produto em escala global, de livre acesso e com correções de vários viéses de modelos de elevação, que possibilitam que nosso trabalho seja replicável e mais próximo a realidade dos biomas que modelamos <span class="citation" data-cites="citação">(<a href="references.html#ref-citação" role="doc-biblioref"><strong>citação?</strong></a>)</span>.</p>
<p>Para o cálculo de <a href="#acumulo_de_fluxo">acúmulo de fluxo</a>, utilizamos o Merit-Hydro <span class="citation" data-cites="citação">(<a href="references.html#ref-citação" role="doc-biblioref"><strong>citação?</strong></a>)</span> que é um produto derivado do Merit-DEM e que possibilita o calculo do acúmulo de fluxo em uma escala glogal e corrigada para o efeito da densidade de árvores no cálculo da rede hidrográfica da região <span class="citation" data-cites="citação">(<a href="references.html#ref-citação" role="doc-biblioref"><strong>citação?</strong></a>)</span>.</p>
<p>Para complementar a superfície gerada pelo acúmulo de fluxo e definir a presença de <strong>rios</strong>, <strong>lagos</strong> e <strong>áreas umidas</strong>, nós incluímos as classes de água do MapBiomas <span class="citation" data-cites="citação">(<a href="references.html#ref-citação" role="doc-biblioref"><strong>citação?</strong></a>)</span>. O MapBiomas é um projeto nacional de mapeamento e classificação de mudanças do uso do solo dos últimos 30 anos a partir de dados de sensoriamento remoto.</p>
<section id="índice-de-posição-topográfica-tpi" class="level5" data-number="6.2.1.1.1">
<h5 data-number="6.2.1.1.1" class="anchored" data-anchor-id="índice-de-posição-topográfica-tpi"><span class="header-section-number">6.2.1.1.1</span> Índice de posição topográfica (TPI)</h5>
<p>O cálculo do TPI foi feito em três escalas com um <em>kernel</em> circular com 7, 11 e 15 células de raio, calculando a diferença da média de elevação entre a célula focal e um conjunto de células vizinhas no <em>kernel</em>, divididos pelo número de células vizinhas (<span class="math inline">\(n\)</span>). <span class="math display">\[
TPI = \frac {\sum  _{i}^{n}\left(vizinhança_i - focal \right)}{n}
\]</span> Onde a vizinhança <span class="math inline">\(i\)</span> representa cada uma das <span class="math inline">\(n\)</span> células dentro do <em>kernel</em> da célula focal. O índice final é composto pela média de TPI das três janelas, o que permite a consideração de diferentes níveis de resolução da paisagem, tanto local quanto regional (Theobald <em>et al</em>. 2015)<span class="citation" data-cites="citação">(<a href="references.html#ref-citação" role="doc-biblioref"><strong>citação?</strong></a>)</span>. Os tamanhos das janelas foram definidos visualmente para que melhor representassem as formas de relevo.</p>
</section>
<section id="aspecto-do-relevo" class="level5" data-number="6.2.1.1.2">
<h5 data-number="6.2.1.1.2" class="anchored" data-anchor-id="aspecto-do-relevo"><span class="header-section-number">6.2.1.1.2</span> Aspecto do relevo</h5>
<p>O <strong>aspecto do relevo</strong> é calculado como um gradiente local das 4 células adjacentes, os resultados são apresentado em graus que representam a direção do relevo (0º = Norte, 90º = Leste, 180º = Sul e 270º = Oeste). Nós dividimos os resultados do aspecto em dois grupos baseados na quantidade de insidência solar, sendo células com valores entre 90º e 270º classificados como <strong>faces frias</strong> e valores entre 0º a 90º e 270º a 360º foram classificados como <strong>faces quentes</strong>.</p>
</section>
<section id="inclinação-do-relevo" class="level5" data-number="6.2.1.1.3">
<h5 data-number="6.2.1.1.3" class="anchored" data-anchor-id="inclinação-do-relevo"><span class="header-section-number">6.2.1.1.3</span> Inclinação do Relevo</h5>
<p>A <strong>inclinação do relevo</strong> é calculada como um gradiente local das 4 células adjacentes, os resultados são apresentado em graus que representam a inclinação do relevo (0º a 90º). A inclinação foi dividida em 5 grupos baseado em faixas de inclinação, para melhor classificar diferentes formas do relevo.</p>
<table class="table">
<thead>
<tr class="header">
<th>Inclinação</th>
<th>Grupo</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>0º a 2º</td>
<td>1</td>
</tr>
<tr class="even">
<td>2º a 6º</td>
<td>2</td>
</tr>
<tr class="odd">
<td>6º a 24º</td>
<td>3</td>
</tr>
<tr class="even">
<td>24º a 35º</td>
<td>4</td>
</tr>
<tr class="odd">
<td>35º a 90º</td>
<td>5</td>
</tr>
</tbody>
</table>
</section>
<section id="índice-de-umidade" class="level5" data-number="6.2.1.1.4">
<h5 data-number="6.2.1.1.4" class="anchored" data-anchor-id="índice-de-umidade"><span class="header-section-number">6.2.1.1.4</span> Índice de umidade</h5>
<p>O índice de umidade foi calculado com base no <strong>acúmulo de fluxo</strong> do Merit-Hydro e a <strong>inclinação do relevo</strong> que calculamos anteriormente. <span class="math display">\[
moisture.index = \frac{\log \left(fluxo+1\right)}{\left(slope+1\right)}  \times1000
\]</span> O <em>moisture index</em> é a média do índice dentro de um <em>kernel</em> circular de uma célula de raio. O tamanho do raio foi escolhido visualmente para suavizar o índice, mas representando bem a distribuição dos cursos d’água. Classificamos como áreas úmidas somente regiões que apresentassem um valor do indice de umidade acima de 3000 e definimos esse valor para que visualmente pudessemos capturar a distribuição dos cursos d’água sem superestimar outras áreas planas. Porém, esse corte do índice não consegue classificar bem corpos de água com grandes extensões (Amazonas, represas e grandes lagos), por isso nós corrigimos a classificação sobrepondo a camada do indice de umidade com a camada de águas do MapBiomas.</p>
<table class="table">
<thead>
<tr class="header">
<th>Códigos</th>
<th>Nomes</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>3</td>
<td>Cool Steep Slope</td>
</tr>
<tr class="even">
<td>4</td>
<td>Warms Steep Slope</td>
</tr>
<tr class="odd">
<td>5</td>
<td>Cliff</td>
</tr>
<tr class="even">
<td>11</td>
<td>Summit/Ridgetop</td>
</tr>
<tr class="odd">
<td>13</td>
<td>Slope Crest</td>
</tr>
<tr class="even">
<td>21</td>
<td>Flat Hilltop</td>
</tr>
<tr class="odd">
<td>22</td>
<td>Gentle Slope Hilltop</td>
</tr>
<tr class="even">
<td>23</td>
<td>Cool Sideslope</td>
</tr>
<tr class="odd">
<td>24</td>
<td>Warm Sideslope</td>
</tr>
<tr class="even">
<td>30</td>
<td>Dry Flats</td>
</tr>
<tr class="odd">
<td>32</td>
<td>Valley/Toeslope</td>
</tr>
<tr class="even">
<td>39</td>
<td>Moist Flats</td>
</tr>
<tr class="odd">
<td>43</td>
<td>Cool Footslope</td>
</tr>
<tr class="even">
<td>44</td>
<td>Warm Sideslope</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="amplitude-altitudinal" class="level4" data-number="6.2.1.2">
<h4 data-number="6.2.1.2" class="anchored" data-anchor-id="amplitude-altitudinal"><span class="header-section-number">6.2.1.2</span> Amplitude Altitudinal</h4>
<p>A amplitude Altitudinal vai representar a variação da elevação em uma região, independente do número de <a href="#formas-de-relevo"><strong>formas de relevo</strong></a>, para diminuir a relação entre as formas de relevo e a elevação já que elas são correlacionadas entre si <span class="citation" data-cites="citação">(<a href="references.html#ref-citação" role="doc-biblioref"><strong>citação?</strong></a>)</span><!--??? Precisamos de citação aqui??-->. A amplitude altitudinal foi calculada como a diferença entre os valores máximos e mínimos de elevação, dentro de um <em>kernel</em> circular de 450 metros, a partir dos dados do <em>Digital Elevation Model</em> do MERIT <span class="citation" data-cites="citação">(<a href="references.html#ref-citação" role="doc-biblioref"><strong>citação?</strong></a>)</span>. Então fizemos uma Regressão Linear Simples (<em>Ordinary Linear Regression</em>; <span class="citation" data-cites="citação">(<a href="references.html#ref-citação" role="doc-biblioref"><strong>citação?</strong></a>)</span>) entre os <strong>valores de amplitude</strong> e a <strong>variedade de formas de relevo</strong> e obtivemos os valores dos resíduos dessa análise para diminuir a correlação estre as duas variáveis.</p>
<p>Por fim, os valores da variação desses resíduos da correlação entre a amplitude e a variedade da forma de relevo, para cada pixel (<span class="math inline">\(Z_{pixel}\)</span>) podem ser calculados ao subtrair o valor da média (<span class="math inline">\(\mu\)</span>) e dividindo o resultado pelo desvio padrão (<span class="math inline">\(\sigma\)</span>), como mostrado na fórmula a seguir: <span class="math display">\[Z_{pixel}= \frac {X_{pixel}-\mu} {\sigma}\]</span></p>
<p>Dessa forma, temos uma imagem que nos mostra a variação, em relação à média, dos valores dos resíduos da amplitude altitudinal para o Brasil e dentro de cada uma das categorias de <strong>regiões eco-geológicas</strong>.</p>
</section>
<section id="densidade-de-banhados" class="level4" data-number="6.2.1.3">
<h4 data-number="6.2.1.3" class="anchored" data-anchor-id="densidade-de-banhados"><span class="header-section-number">6.2.1.3</span> Densidade de Banhados</h4>
<p>Para calcular a densidade de banhados usados os dados disponibilizados na base de dados <em>Global Wetlands Database</em> <span class="citation" data-cites="gumbricht_tropical_2017">(<a href="references.html#ref-gumbricht_tropical_2017" role="doc-biblioref">Gumbricht et al. 2017</a>)</span>, que é uma base de dados que fornece informação e inventário de áreas úmidas no mundo. Os dados são obtidos através de imagens de satélite, amostragens aéreas e relatórios publicados. Como áreas de banhados ocorrem em diversas configurações e distribuição no espaço, nós avaliamos as variações das mesmas em escala local (450 metros) e em uma escala regional (1170 metros). Para o cálculo final dos valores de Densidade de banhados, utilizamos tanto o número de pixels em escala regional e a densidade, tanto em escala regional quanto local.</p>
<p>A <strong>densidade de banhados</strong> foi calculada como uma média do número de <em>pixels</em> de áreas de banhado, dentro de um kernel de escala regional (1170 metros) e um kernel em escala local (450 metros), excluindo rios e lagos. Já a <strong>contagem em escala local</strong> foi calculada como uma contagem de <em>pixels</em> dentro de um <em>kernel</em> circular com 1170 metros de diâmetro. A contagem vai representar o número de áreas umidas (excluindo rios e lagos), mostrando regiões de maiores concentrações de pixels de áreas úmidas, que apresentem uma baixa densidade de banhados. Essas 3 camadas vão auxiliar na identificação de regiões de <strong>Diversidade da Paisagem</strong> que apresentem valores baixos para formas de relevo e amplitude de elevação, mas que tenham uma acumulação de áreas umidas que poderiam amenizar localmente o efeito das mudanças climáticas <span class="citation" data-cites="citação">(<a href="references.html#ref-citação" role="doc-biblioref"><strong>citação?</strong></a>)</span>.</p>
<p>Para calcular os valores finais de densidade de banhado, precisamos juntar as informações das 3 camadas produzidas, primeiro calculando os valores estandartizados para cada uma delas e depois fazendo uma série de médias pixel a pixel para selecionar os maiores valores de <span class="math inline">\(Z\)</span>. Calculamos os valores estandarizados de <span class="math inline">\(Z\)</span> para cada pixel (<span class="math inline">\(Z_{pixel}\)</span>) ao subtrair o valor da média (<span class="math inline">\(\mu\)</span>) e dividir o resultado pelo desvio padrão (<span class="math inline">\(\sigma\)</span>), como mostrado na fórmula a seguir: <span class="math display">\[Z_{pixel}= \frac {X_{pixel}-\mu} {\sigma}\]</span> A média e o desvio padrão, e portanto os valores de Z, foram calculados tanto para toda a extensão do Brasil, como dentro das diferentes categorias de <a href="#regioes-eco-geologicas"><strong>regiões eco-geológicas</strong></a>. Com o <span class="math inline">\(Z\)</span> calculado para as 3 camadas, podemos calcular os valores de diversidade de áreas de banhado (<span class="math inline">\(Z_{banhado}\)</span>) ao fazermos uma média dos valores para as camadas de densidade e contagem. Primeiro calculamos a média entre as imagens de densidade de banhados em escala local (<span class="math inline">\(Z_{local}\)</span>) e regional (<span class="math inline">\(Z_{regional}\)</span>), com mais peso para os valores da densidade local: <span class="math display">\[
Z_{densidade}=\frac {{{(Z_{local}}{\times2)}}+{Z_{regional}}}{3}
\]</span> Ao compararmos esse resultado a imagem de contagem regional, podemos identificar os locais onde os valores para densidade (<span class="math inline">\(Z_{densidade}\)</span>) são menores que os valores de contagem (<span class="math inline">\(Z_{contagem}\)</span>) e calculamos a média para esses pixels, novamente dando mais peso ao valores de densidade: <span class="math display">\[
Z_{banhado}=\frac {{{(Z_{densidade}}{\times3)}}+{Z_{contagem}}}{4}
\]</span> Ao final de todas as operações, temos uma única imagem com valores que representam a variação em relação à média dos valores de densidade e contagem de pixels de áreas de banhado tanto para a extensão do Brasil, quanto referentes às regiões eco-geológicas.</p>
</section>
<section id="diversidade-de-solo" class="level4" data-number="6.2.1.4">
<h4 data-number="6.2.1.4" class="anchored" data-anchor-id="diversidade-de-solo"><span class="header-section-number">6.2.1.4</span> Diversidade de Solo</h4>
<p>A diversidade de solo foi calculada como a distribuição do número de classes de solo, dentro de um <em>kernel</em> de 1350 metros e foi usada para indicar áreas com grande concentração dos diferentes tipos de solo que vão afetar diretamente na diversidade de espécies do ambiente. Para calcular o raster de diversidade do solo usamos a classificação oficial dos solos brasileiros, disponibilizada pelo Instituto Brasileiro de Geografica e Estatística (IBGE; <span class="citation" data-cites="citação">(<a href="references.html#ref-citação" role="doc-biblioref"><strong>citação?</strong></a>)</span>). Como a classificação do IBGE foi disponibilizada em formato de <em>shapefiles</em>, começamos a análise separando cada uma das 108 classes de solo do Brasil e calculamos um raster de presença e ausência do tipo de solo. Ao final do processo podemos somar os diferentes mapas de presença para obter os mapas de diversidade do solo, onde os maiores valores de cada pixel mostram áreas com concentração de diferentes tipos de solo.</p>
<p>Por fim, calculamos os valores de Z para cada pixel (<span class="math inline">\(Z_{pixel}\)</span>) ao subtrair o valor da média (<span class="math inline">\(\mu\)</span>) e dividindo o resultado pelo desvio padrão (<span class="math inline">\(\sigma\)</span>), como mostrado na fórmula a seguir: <span class="math display">\[Z_{pixel}= \frac {X_{pixel}-\mu} {\sigma}\]</span> Os cálculos de Z foram feitos tanto a nivel nacional do Brasil, quanto dentro de cada classificação de <strong>regiões eco-geológicas</strong> usando as médias e desvios padrões dentro de cada uma das classes.</p>
</section>
</section>
<section id="conectividade-local" class="level3" data-number="6.2.2">
<h3 data-number="6.2.2" class="anchored" data-anchor-id="conectividade-local"><span class="header-section-number">6.2.2</span> Conectividade local</h3>
<section id="cálculos-de-resistência" class="level4" data-number="6.2.2.1">
<h4 data-number="6.2.2.1" class="anchored" data-anchor-id="cálculos-de-resistência"><span class="header-section-number">6.2.2.1</span> Cálculos de resistência</h4>
<p>Os valores de resistência são medidas relativas do grau de dificuldade de deslocamento dos organismos nos diferentes tipos de cobertura do solo. Esses valores foram atribuídos por bioma, seguindo a premissa de que quanto maior for a diferença estrutural entre um dado tipo de cobertura do solo e a vegetação original do bioma, maior será o valor de resistência da classe de cobertura do solo em questão.</p>
<p>Os dados espaciais primários utilizados para calcular a superfície de resistência, até o momento, foram a camada de cobertura do solo fornecida pelo MapBiomas (coleção 7, ano 2021) e a base de estradas pavimentadas e não pavimentadas fornecida pelo IBGE (BCIM250, ano 2021). Para tanto, preliminarmente, a superfície de cobertura do solo do MapBiomas foi reamostrada para gerar pixels com 90 metros de tamanho, aproximadamente. Também convertemos o arquivo vetorial de estradas para o formato matricial, com pixels de tamanho aproximado de 90 metros. Conjugamos, por álgebra de mapas, as bases matriciais do MapBiomas e de estadas de tal maneira que todos os pixels da base do MapBiomas que se sobrepuseram a um pixel de estrada assumiram um novo valor correpondente a um pixel de estrada pavimentada ou não pavimentada. Os pixels do mapa consolidado de cobertura do solo, já incluindo as estradas pavimentadas e não pavimentadas como novas classes, receberam, separadamente por bioma, valores de resistência que buscaram traduzir, comparativamente entre as classes, o grau de dificuldade de movimentação de um dado animal ou propágulo numa dada classe de cobertura do solo. A premissa assumida aqui é que quanto maior for a diferença estrutural da classe de cobertura do solo para o hábitat original do bioma, maior será a dificuldade à movimentação que esta classe oferece. Os valores de resistência dos pixels de cada uma das classes foram atribuídos, por bioma, pela equipe do Projeto e podem ser vistos na tabela XXX.</p>
<p>Depois de atribuídos os valores de resistência, aplicamos à superfície gerada a função Kernel de decaimento linear. Esta análise considerou, numa janela móvel de 23 pixels, o contexto espacial em que cada pixel está inserido, reconhecendo que pixels mais próximos possuem uma influência maior um sobre outro do que pixels mais distantes. Desta maneira, a função Kernel nos auxilia na tarefa de encontrar os melhores caminhos de deslocamento na paisagem, ou seja, aqueles caminhos que oferecem menor resistência.</p>
<!-- Os dados espaciais primários para calcular a superfície de resistência foram a camada de cobertura do solo fornecida pelo MapBiomas (coleção 7 – ano 2021) e a base de estradas fornecida pelo IBGE (BCIM250 de 2021). Os seguintes passos foram realizados:
1.  Os pixels da camada do MapBiomas foram reamostrados de 30 metros par 90 metros, usando a ferramenta “Ressample” do software ArcGis 10.5
2.  O shapefile de estradas do IBGE foi convertido para o formato raster, com pixels de aproximadamente 90 metros de tamanho. Os pixels correspondentes a estradas pavimentadas receberam o valor de 2000, os pixels de estradas não pavimentadas receberam o valor de 1000 e os demais pixels (que não correspondem a nenhuma estrada) receberam o valor de 0 (zero)
3.  No ArcGis 10.5, usando a ferramenta “Map Calculator” as camadas de cobertura do solo e de estradas foram somadas. Na superfície gerada, foram mantidos os valores dos pixels, originalmente atribuídos pelo MapBiomas, quando um pixel de cobertura do solo se sobrepusesse a algum pixel da camada de estradas com valor igual a zero. Nos casos onde os pixels de cobertura do solo se sobrepuseram a um pixel de estrada pavimentadas o valor final desses pixels foi reclassificado para 98 e quando a sobreposição ocorreu com algum pixel de estrada não pavimentada, o valor final foi reclassificado para 99
4.  Na superfície gerada, os pixels de cada uma das classes receberam valores de resistência, inferidos separadamente para cada bioma (obs: neste arquivo os valores de resistência foram inferidos pela equipe de bolsistas de pós-doutorado do Projeto e seus supervisores, com auxílio da equipe da TNC). Os valores de resistência para cada classe de uso e cobertura do solo, por bioma, encontram-se na tabela 1 (abaixo). Os valores de resistência buscaram traduzir, comparativamente entre as classes, o grau de dificuldade de movimentação de um dado animal ou propágulo naquela classe de cobertura do solo. A premissa assumida aqui, para todos os biomas, é que quanto maior fora a diferença estrutural daquela classe para o hábitat original do bioma, maior será a dificuldade de movimentação por um dado pixel
5.  Depois de atribuídos os valores de resistência, usando a ferramenta “Focal Statistics” do ArcGis 10.5, foi calculada o valor médio do pixel focal, em um raio de 23 pixels, aplicando a função de Kernel, com decaimento linear. Esta análise considera o contexto espacial em que cada pixel está inserido, reconhecendo que pixels mais próximos possuem uma influência maior um sobre o outro do que pixels mais distantes -->
</section>
<section id="filtro-de-kernel-como-proxy-da-conectividade-local" class="level4" data-number="6.2.2.2">
<h4 data-number="6.2.2.2" class="anchored" data-anchor-id="filtro-de-kernel-como-proxy-da-conectividade-local"><span class="header-section-number">6.2.2.2</span> Filtro de kernel como <em>proxy</em> da conectividade local</h4>
<p>Um filtro de <em>kernel</em> de 23 x 23 píxeis (~2070m) foi aplicado ao raster de resistências.</p>
</section>
</section>
<section id="combinando-diversidade-da-paisagem-e-conectividade-local-resiliência" class="level3" data-number="6.2.3">
<h3 data-number="6.2.3" class="anchored" data-anchor-id="combinando-diversidade-da-paisagem-e-conectividade-local-resiliência"><span class="header-section-number">6.2.3</span> Combinando diversidade da paisagem e conectividade local: resiliência</h3>
</section>
</section>
<section id="conectividade-regional" class="level2" data-number="6.3">
<h2 data-number="6.3" class="anchored" data-anchor-id="conectividade-regional"><span class="header-section-number">6.3</span> Conectividade regional</h2>
<p>Calculamos a conectividade regional baseada em teoria de circuitos <span class="citation" data-cites="mcrae_isolation_2006">(<a href="references.html#ref-mcrae_isolation_2006" role="doc-biblioref">McRae 2006</a>)</span> utilizando a implementação de Omniscape para Julia <span class="citation" data-cites="hall_circuitscape_2021 landau_omniscapejl_2021">(<a href="references.html#ref-landau_omniscapejl_2021" role="doc-biblioref">Landau et al. 2021</a>, <a href="references.html#ref-hall_circuitscape_2021" role="doc-biblioref">Hall et al. 2021</a>)</span>.</p>
<p>Como base para estas análises, utilizamos:</p>
<ul>
<li>o raster de resistência calculado acima com o filtro de <em>kernel</em> utilizado como base para a conectividade local e subamostrado para uma resolução de 900m por pixel,</li>
<li>um raio da área de interesse de 100 píxeis (~90km)</li>
<li>agrupamentos de 5 píxeis de interesse para a janela móvel (~4.5km).</li>
</ul>
<p>O output de Omniscape são três arquivos de conectividade relacionados:</p>
<ul>
<li><code>flow_current</code> é o fluxo que aconteceria sem levar em conta a camada de resistência. Ele leva em conta a configuração espacial da paisagem (estreitos, barras) e dos píxeis de baixa resistência de origem. Nem todo pixel é source pixel, mas a corrente que entra em cada pixel de baixa resistência entra sem resistência. Flow current é usado como um “modelo nulo” de conectividade.</li>
<li><code>cumulative_current</code> é a corrente levando em conta a configuração espacial e os valores de resistência</li>
<li><code>normalized_current</code> equivale a <span class="math inline">\(\frac{cumulative\_current}{flow\_current}\)</span> e controla o efeito da configuração espacial do cálculo de conectividade.</li>
</ul>
<p>Os resultados da análise nesta escala espacial foram reclassificados de acordo com a distribuição ao redor da média dos valores nas categorias seguintes:</p>
<ul>
<li>Entre o valor mínimo e média - 0,5 desvio padrão: fluxo impedido. O fluxo não consegue circular devido à presença de áreas de alta resistência, podendo se redirecionar em torno a essas áreas</li>
<li>Entre média - 0,5 desvio padrão e média + 1 desvio padrão: fluxo difuso. O fluxo consegue se dispersar em áreas contíguas de resistências baixas a moderadas, sem se ver impedido ou canalizado</li>
<li>Entre média + 1 desvio padrão e média + 2 desvios padrão: fluxo intensificado. O fluxo potencial se concentra devido à configuração da paisagem ou de áreas de alta resistência que forçam um rumo determinado</li>
<li>Maior que a média + 2 desvios padrão: fluxo canalizado. Fluxo muito acima do esperado em uma área sem resistência. Ele passa por estreitos, barras de areia e estruturas similares.</li>
</ul>


<div id="refs" class="references csl-bib-body hanging-indent" data-line-spacing="2" role="list" style="display: none">
<div id="ref-gorelick_google_2017" class="csl-entry" role="listitem">
Gorelick, N., M. Hancher, M. Dixon, S. Ilyushchenko, D. Thau, and R. Moore. 2017. <a href="https://doi.org/10.1016/j.rse.2017.06.031">Google <span>Earth Engine</span>: <span class="nocase">Planetary-scale</span> geospatial analysis for everyone</a>. Remote Sensing of Environment.
</div>
<div id="ref-gumbricht_tropical_2017" class="csl-entry" role="listitem">
Gumbricht, T., R. M. Román-Cuesta, L. V. Verchot, M. Herold, F. Wittmann, E. Householder, N. Herold, and D. Murdiyarso. 2017. <a href="https://doi.org/10.17528/cifor/data.00058">Tropical and subtropical wetlands distribution version 2</a>.
</div>
<div id="ref-hall_circuitscape_2021" class="csl-entry" role="listitem">
Hall, K. R., R. Anantharaman, V. A. Landau, M. Clark, B. G. Dickson, A. Jones, J. Platt, A. Edelman, and V. B. Shah. 2021. <a href="https://doi.org/10.3390/land10030301">Circuitscape in <span>Julia</span>: <span>Empowering Dynamic Approaches</span> to <span>Connectivity Assessment</span></a>. Land 10:301.
</div>
<div id="ref-landau_omniscapejl_2021" class="csl-entry" role="listitem">
Landau, V., V. Shah, R. Anantharaman, and K. Hall. 2021. <a href="https://doi.org/10.21105/joss.02829">Omniscape.jl: <span>Software</span> to compute omnidirectional landscape connectivity</a>. Journal of Open Source Software 6:2829.
</div>
<div id="ref-mcrae_isolation_2006" class="csl-entry" role="listitem">
McRae, B. H. 2006. Isolation by resistance. Evolution 60:1551–1561.
</div>
</div>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./metodologia.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Métodos</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./resultados.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Resultados</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->



</body></html>